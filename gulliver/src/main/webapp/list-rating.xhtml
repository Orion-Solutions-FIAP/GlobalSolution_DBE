<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html 	xmlns="http://www.w3.org/1999/xhtml"
		xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
		xmlns:h="http://xmlns.jcp.org/jsf/html"
		xmlns:f="http://xmlns.jcp.org/jsf/core"
		xmlns:p="http://primefaces.org/ui">

<ui:composition template="_template.xhtml">

	<ui:define name="content">
		
		<div class="listSection" >
			<div class="card">
			    <h:form>
			        <p:dataTable var="rating" value="#{ratingBean.userRating}">
			            <f:facet name="header">
			                Avaliações
			            </f:facet>
			            
			            <p:column style="width:2rem">
	                		<p:rowToggler/>
	            		</p:column>
			
			            <p:column headerText="Locadora">
			                <h:outputText value="#{rating.rentalCompany.name}"/>
			            </p:column>
			
			            <p:column headerText="Titulo">
			                <h:outputText value="#{rating.title}"/>
			            </p:column>
			
			            <p:column styleClass="avaliacao" headerText="Avaliacao">
			                <p:rating readonly="true" value="#{rating.grade}"/>
			            </p:column>
			            
			            <p:column styleClass="botoes">
			                <p:commandButton icon="pi pi-pencil" styleClass="rounded-button" action="#{ratingBean.newEdit}">
			                	<f:setPropertyActionListener value="#{rating}" target="#{ratingBean.rating}"/>
			                </p:commandButton>
			                
			                 <p:commandButton styleClass="rounded-button ui-button-danger" icon="pi pi-times" value="Deletar" action="#{ratingBean.deleteRating}" >
                           		<f:setPropertyActionListener value="#{rating}" target="#{ratingBean.rate}"/>
                       		</p:commandButton>
                       		
			            </p:column>
			            
			             <p:rowExpansion>
			                <div class="product">
			                    <div class="product-list-item">
			                    	<p:graphicImage url="#{rating.rentalCompany.urlImage}" width="100"/>
			                    	
			                        <div class="product-list-detail">
			                            <div class="product-name">#{rating.title}</div>
			                            <div class="product-description">#{rating.description}</div>
		                           	</div>
		                           	    
		                          	<p:rating readonly="true" value="#{rating.grade}"/>
			                            
			                    </div>
			                </div>
			            </p:rowExpansion>
			            
			        </p:dataTable>
			        
		     	</h:form>
			</div>
		</div>   
	</ui:define>

</ui:composition>
</html>